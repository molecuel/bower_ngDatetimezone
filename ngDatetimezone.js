/**
 * ngDatetimezone - v0.0.7 - 2014-11-20
 * https://github.com/molecuel/ngDatetimezone
 *
 * Copyright (c) 2014 Dominic BÃ¶ttger
 * Licensed MIT <https://raw.github.com/molecuel/ngDatetimezone/master/LICENSE>
 */
!function(a,b,c){b.module("ngDatetimezone",["ui.bootstrap","ngDatetime-templates-app","ngDatetime-templates-common","ui.select","ngSanitize"]).directive("dateTimeZone",function(){return{scope:{model:"=widgetmodel",defaulttimezone:"=",dateonly:"=",timeonly:"=",notz:"=",tzmodel:"="},restrict:"E",templateUrl:"templates/datetimezone.tpl.html",link:function(a){a.checkDate=new Date,a.timezones=moment.tz.names(),a.timezone={},a.datemodel={},a.$watch("defaulttimezone",function(){a.defaulttimezone&&!a.timezone.selected?a.timezone.selected=a.defaulttimezone:a.timezone.selected||(a.timezone.selected="Europe/Berlin")}),a.enabled={},a.enabled.time=!0,a.enabled.date=!0,a.enabled.tz=!0,a.dateonly&&(a.enabled.time=!1,a.enabled.date=!0,a.enabled.tz=!0),a.timeonly&&(a.enabled.date=!1,a.enabled.time=!0,a.enabled.tz=!0),a.notz&&(a.enabled.tz=!1),a.$watch("datemodel.day",function(b){if(b!==c&&a.tzdate){var d=a.tzdate.clone();d.date(b),d.hour(a.datemodel.hour),d.minute(a.datemodel.minute),d.month(a.datemodel.month-1),d.year(a.datemodel.year),a.tzdate=d}}),a.$watch("datemodel.month",function(b){if(b!==c&&a.tzdate){var d=b,e=a.tzdate.clone();e.month(d-1),e.hour(a.datemodel.hour),e.minute(a.datemodel.minute),e.date(a.datemodel.day),e.year(a.datemodel.year),a.tzdate=e}}),a.$watch("datemodel.year",function(b){if(b!==c&&a.tzdate){var d=a.tzdate.clone();d.year(b),d.hour(a.datemodel.hour),d.minute(a.datemodel.minute),d.date(a.datemodel.day),d.month(a.datemodel.month-1),a.tzdate=d}}),a.$watch("datemodel.hour",function(b){if(b!==c&&a.tzdate){var d=b,e=a.tzdate.clone();e.hour(d),e.minute(a.datemodel.minute),e.date(a.datemodel.day),e.month(a.datemodel.month-1),e.year(a.datemodel.year),a.tzdate=e}}),a.$watch("datemodel.minute",function(b){if(b!==c&&a.tzdate){var d=a.tzdate.clone();d.minute(b),d.hour(a.datemodel.hour),d.date(a.datemodel.day),d.month(a.datemodel.month-1),d.year(a.datemodel.year),a.tzdate=d}}),a.$watch("timezone.selected",function(b){if(b!==c&&a.tzdate){var d=a.tzdate.clone();d.tz(b),d.hour(a.datemodel.hour),d.minute(a.datemodel.minute),d.date(a.datemodel.day),d.month(a.datemodel.month-1),d.year(a.datemodel.year),a.tzdate=d}}),a.$watch("tzdate",function(b){if(b!==c&&b&&b.toString()&&a.model){var d=new Date(b.toString());a.checkDate=d,a.model=d}}),a.$watch("model",function(b){if(b&&a.checkDate.toString()!=b.toString()){newmom=moment(b?b:new Date),a.tzmodel&&(a.timezone.selected=a.tzmodel);var c;a.timezone&&a.timezone.selected?c=newmom.tz(a.timezone.selected):a.defaulttimezone&&(c=newmom.tz(a.defaulttimezone)),a.datemodel.hour=c.hour(),a.datemodel.minute=c.minute(),a.datemodel.day=c.date(),a.datemodel.month=c.month()+1,a.datemodel.year=c.year(),a.tzdate=c}})}}}),b.module("ngDatetime-templates-app",["templates/datetimezone.tpl.html"]),b.module("templates/datetimezone.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/datetimezone.tpl.html",'<div class="row">\n  <div ng-if="enabled.date" class="col-xs-5" style="margin-top: 35px;">\n      <div class="form-inline">\n        <div class="form-group">\n          <label>Day</label>\n          <input type="number" min="1" max="31" class="form-control" ng-model="datemodel.day" ng-required="true" style="width: 60px;"/>\n        </div>\n        <div class="form-group">\n            <label>Month</label>\n            <input type="number" min="1" max="12" class="form-control" ng-model="datemodel.month" ng-required="true" style="width: 60px;"/>\n          </div>\n          <div class="form-group">\n            <label>Year</label>\n            <input type="number" min="1900" max="2200"class="form-control" ng-model="datemodel.year" ng-required="true" style="width: 75px;"/>\n          </div>\n    </div>\n  </div>\n  <div ng-if="enabled.time" class="col-xs-3" style="margin-top: 35px;">\n    <div class="form-inline">\n      <div class="form-group">\n        <label>Hour</label>\n        <input type="number" min="0" max="24" class="form-control" ng-model="datemodel.hour" ng-required="true" style="width: 60px;"/>\n      </div>\n      <div class="form-group">\n          <label>Minute</label>\n          <input type="number" min="0" max="59" class="form-control" ng-model="datemodel.minute" ng-required="true" style="width: 60px;"/>\n        </div>\n      </div>\n  </div>\n  <div ng-if="enabled.tz" class="col-xs-4" style="margin-top: 35px;">\n    <ui-select ng-model="timezone.selected" theme="select2" ng-disabled="disabled">\n      <ui-select-match placeholder="Select timezone">{{$select.selected}}</ui-select-match>\n      <ui-select-choices repeat="timezone in timezones | filter: $select.search">\n        <div ng-bind-html="timezone | highlight: $select.search"></div>\n      </ui-select-choices>\n    </ui-select>\n  </div>\n</div>\n')}]),b.module("ngDatetime-templates-common",[])}(window,window.angular);